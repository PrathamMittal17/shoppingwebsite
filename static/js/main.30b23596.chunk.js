(this.webpackJsonpgrocerywebsite=this.webpackJsonpgrocerywebsite||[]).push([[0],{42:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},59:function(e,t,n){},70:function(e,t,n){},98:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(18),s=n.n(a),i=(n(57),n(6)),o=(n(58),n(103)),j=n(100),l=n(106),d=n(14),u=(n(59),n(1)),b=function(){var e=Object(c.useContext)(z),t=Object(i.a)(e,2)[1],n=Object(c.useContext)(R),r=Object(i.a)(n,1)[0],a=Object(c.useContext)(G),s=Object(i.a)(a,2)[1],b=Object(c.useContext)(A),h=Object(i.a)(b,2),p=h[0],O=h[1];return Object(u.jsx)(o.a,{expand:"sm",children:Object(u.jsxs)(j.a,{children:[Object(u.jsx)(o.a.Brand,{as:d.b,to:"/",children:Object(u.jsxs)("span",{className:"brand-name h4",children:["Thrifty",Object(u.jsx)("span",{className:"box-text",children:"Box"})]})}),Object(u.jsx)(o.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.jsx)(o.a.Collapse,{id:"basic-navbar-nav",children:"loggedin"===p?Object(u.jsxs)(l.a,{className:"ms-auto",style:{gap:"10px"},children:[Object(u.jsxs)("div",{style:{display:"flex"},className:"cart",children:[Object(u.jsx)(l.a.Link,{as:d.b,to:"/cart",children:Object(u.jsx)("h5",{className:"black",children:"Cart"})}),Object(u.jsx)("span",{style:{fontWeight:"bold",color:"#ec1c24"},children:r})]}),Object(u.jsx)(l.a.Link,{as:d.b,to:"/profile",children:Object(u.jsx)("h5",{className:"black",children:"Profile"})}),Object(u.jsx)(l.a.Link,{onClick:function(){s(""),O("loggedout"),localStorage.removeItem("user"),localStorage.removeItem("id")},children:Object(u.jsx)("h5",{className:"black",children:"Sign Out"})})]}):Object(u.jsxs)(l.a,{className:"ms-auto",style:{gap:"10px"},children:[Object(u.jsx)(l.a.Item,{style:{cursor:"pointer"},onClick:function(){return t("register")},children:Object(u.jsx)("h5",{className:"black",children:"Register"})}),Object(u.jsx)(l.a.Item,{style:{cursor:"pointer"},onClick:function(){return t("signin")},children:Object(u.jsx)("h5",{className:"black",children:"Sign In"})})]})})]})})},h=n(8),p=n(105),O=n(101),m=function(e){var t=e.id,n=void 0===t?0:t,r=e.image,a=e.brandName,s=e.productName,o=e.price,j=e.userId,l=void 0===j?0:j,d=e.cartTotal,b=Object(c.useState)("Add To Cart"),h=Object(i.a)(b,2),m=h[0],x=h[1],f=Object(c.useState)(!1),g=Object(i.a)(f,2),y=g[0],C=g[1];Object(c.useEffect)((function(){fetch("https://young-refuge-95269.herokuapp.com/getitemcartstatus",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n,customerId:l})}).then((function(e){return e.json()})).then((function(e){e[0]?(x("Item In Cart"),C(!0)):(x("Add to Cart"),C(!1))}))}),[l,n]);return Object(u.jsxs)(p.a,{style:{width:"18rem",margin:"20px"},children:[Object(u.jsx)(p.a.Img,{variant:"top",src:r}),Object(u.jsxs)(p.a.Body,{children:[Object(u.jsx)(p.a.Subtitle,{children:a}),Object(u.jsx)(p.a.Title,{children:s}),Object(u.jsxs)(p.a.Text,{children:["Rs.",o]}),Object(u.jsx)(O.a,{disabled:y,variant:"primary",onClick:function(){x("Item In Cart"),C(!0),l&&(fetch("https://young-refuge-95269.herokuapp.com/cart",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:n,customerId:l,status:"T"})}),fetch("https://young-refuge-95269.herokuapp.com/carttotalitems",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:l,operation:"I"})}).then((function(e){return e.json()})).then((function(e){return d[1](e)})))},children:m})]})]})},x=(n(70),function(e){var t=e.products,n=Object(c.useContext)(G),r=Object(i.a)(n,1)[0],a=Object(c.useContext)(R),s=Object(i.a)(a,2),o=s[0],j=s[1];return Object(u.jsx)("div",{className:"ProductCardList",children:t.map((function(e,n){return Object(u.jsx)(m,{id:t[n].product_id,image:t[n].img,brandName:t[n].brand_name,productName:t[n].product_name,price:t[n].price,userId:r.id,cartTotal:[o,j]},t[n].product_id)}))})}),f=n(41),g=n.n(f),y=n(50),C=n(33),v=n(34),S=function(e){var t=e.id,n=e.productName,r=e.price,a=e.img,s=e.quantity,o=e.custId,j=e.cartTotalItems,l=Object(c.useContext)(k),d=Object(i.a)(l,2)[1],b=Object(c.useContext)(T),h=Object(i.a)(b,2)[1],p=Object(c.useState)(s),m=Object(i.a)(p,2),x=m[0],f=m[1];Object(c.useEffect)((function(){fetch("https://young-refuge-95269.herokuapp.com/updatecartitemqty",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({cartItemId:t,qty:x})})}),[x,t]);return Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(u.jsx)("img",{src:a,alt:"item",style:{margin:"5px",width:"100px",height:"100px"}}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",wordBreak:"break-all"},children:[Object(u.jsx)("h3",{style:{margin:"5px"},children:n}),Object(u.jsxs)("h3",{style:{margin:"5px"},children:["Rs.",r*x]})]})]}),Object(u.jsxs)("div",{style:{display:"flex",justifyContent:"flex-end",alignItems:"center"},children:[Object(u.jsx)(O.a,{size:"sm",variant:"outline-primary",style:{margin:"20px"},onClick:function(){x<4&&(f(x+1),h((function(e){return e+Number(r)})))},children:Object(u.jsx)(C.a,{size:"lg",style:{fontSize:"1rem"},icon:v.b})}),Object(u.jsx)("h4",{children:x}),Object(u.jsx)(O.a,{size:"sm",variant:"outline-primary",style:{margin:"20px"},onClick:function(){x>1&&(f(x-1),h((function(e){return e-Number(r)})))},children:Object(u.jsx)(C.a,{size:"lg",style:{fontSize:"1rem"},icon:v.a})}),Object(u.jsx)(O.a,{size:"md",variant:"outline-danger",style:{margin:"10px"},onClick:function(){fetch("https://young-refuge-95269.herokuapp.com/removecartitem",{method:"delete",headers:{"Content-Type":"application/json"},body:JSON.stringify({item_id:t})}).then(h((function(e){return e-Number(r)*x}))).then(d(!0)),fetch("https://young-refuge-95269.herokuapp.com/carttotalitems",{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:o,operation:"D"})}).then((function(e){return e.json()})).then((function(e){return j[1](e)}))},children:Object(u.jsx)(C.a,{size:"lg",style:{fontSize:"1rem"},icon:v.c})})]})]})},I=n(51),N=n(102),k=Object(c.createContext)(),T=Object(c.createContext)(),w=function(e){var t=e.customerId,n=void 0===t?0:t,r=Object(c.useState)([]),a=Object(i.a)(r,2),s=a[0],o=a[1],j=Object(c.useState)(!1),l=Object(i.a)(j,2),d=l[0],b=l[1],h=Object(c.useState)(0),p=Object(i.a)(h,2),m=p[0],x=p[1],f=Object(c.useContext)(R),C=Object(i.a)(f,2),v=C[0],w=C[1];return Object(c.useEffect)((function(){fetch("https://young-refuge-95269.herokuapp.com/cartitem",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:n})}).then((function(e){return e.json()})).then((function(e){return o(e)})).then(b(!1)).catch((function(e){return console.log("Request Failed")}))}),[n,d]),s.length>0?Object(u.jsxs)(N.a,{style:{padding:"5px"},children:[s.map((function(e,t){return 0===m&&x((function(e){return e+s[t].price*s[t].qty})),Object(u.jsx)(N.a.Item,{children:Object(u.jsx)(k.Provider,{value:[d,b],children:Object(u.jsx)(T.Provider,{value:[m,x],children:Object(u.jsx)(S,{id:s[t].cart_item_id,productName:s[t].product_name,price:s[t].price,img:s[t].img,quantity:s[t].qty,custId:n,cartTotalItems:[v,w]},s[t].cart_item_id)})})},t)})),Object(u.jsxs)("div",{className:"text-center",children:[Object(u.jsxs)("h3",{id:"totalPrice",children:["Total:Rs.",m]}),Object(u.jsx)(O.a,{type:"submit",onClick:function(){fetch("https://young-refuge-95269.herokuapp.com/create-checkout-session",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:100*m})}).then((function(e){return e.json()})).then(function(){var e=Object(y.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(I.a)("pk_test_51JmIXVSBM1qtXmvlx74yuerGEmGuKSxOQ7Ej0XDdZrpZQFasZ4XObY9hCWjeQEXA5GDH1QBgPShHtdlKKJBBYCE400KZp54zhq");case 2:e.sent.redirectToCheckout({sessionId:t.id});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"Checkout"})]})]}):Object(u.jsx)("h1",{style:{textAlign:"center"},children:"Cart is empty"})},E=n(52),J=function(e){var t=e.product_name,n=e.qty,c=e.img,r=e.price,a=e.date;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsxs)("h3",{children:["Purchased on : ",a.slice(0,10)]}),Object(u.jsxs)("div",{style:{display:"flex",flexWrap:"wrap"},children:[Object(u.jsx)("img",{src:c,alt:"item",style:{margin:"10px",width:"100px",height:"100px"}}),Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",wordBreak:"break-word"},children:[Object(u.jsx)("h3",{children:t}),Object(u.jsxs)("h3",{children:["Rs.",r]}),Object(u.jsxs)("h3",{children:["Qty:",n]})]})]})]})},P=function(){var e=Object(c.useState)([]),t=Object(i.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=localStorage.getItem("user"),t=JSON.parse(e).id;fetch("https://young-refuge-95269.herokuapp.com/gettingOrder",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({custId:t})}).then((function(e){return e.json()})).then((function(e){return r(e)}))}),[]),0===n.length?Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"You Have No Orders!"}),Object(u.jsx)(d.b,{to:"/",children:Object(u.jsx)("h2",{style:{textAlign:"center"},children:"Continue Shopping"})})]}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h3",{children:"Your Orders:"}),Object(u.jsx)(N.a,{children:n.map((function(e,t){return Object(u.jsx)(E.a,{children:Object(u.jsx)(J,{id:n[t].order_id,product_name:n[t].product_name,img:n[t].img,price:n[t].price,qty:n[t].qty,date:n[t].date},n[t].order_id)},n[t].order_id)}))})]})},_=function(e){var t=e.Name,n=e.Email;return Object(u.jsxs)("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",padding:"20px"},children:[Object(u.jsxs)("h3",{children:["Name:",t]}),Object(u.jsxs)("h3",{style:{wordBreak:"break-word"},children:["Email:",n]}),Object(u.jsx)(P,{})]})},q=n(104),L=(n(42),function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),o=s[0],j=s[1],l=Object(c.useState)(""),d=Object(i.a)(l,2),b=d[0],h=d[1],p=Object(c.useState)(""),m=Object(i.a)(p,2),x=m[0],f=m[1],g=Object(c.useContext)(A),y=Object(i.a)(g,2),C=(y[0],y[1]),v=Object(c.useContext)(z),S=Object(i.a)(v,2),I=(S[0],S[1]),N=Object(c.useContext)(G),k=Object(i.a)(N,2),T=(k[0],k[1]);return Object(u.jsxs)(q.a,{children:[Object(u.jsxs)(q.a.Group,{className:"mb-3",controlId:"fname",children:[Object(u.jsx)(q.a.Label,{children:"First Name"}),Object(u.jsx)(q.a.Control,{type:"text",placeholder:"Enter First Name:",onChange:function(e){j(e.target.value)}})]}),Object(u.jsxs)(q.a.Group,{className:"mb-3",controlId:"lname",children:[Object(u.jsx)(q.a.Label,{children:"Last Name"}),Object(u.jsx)(q.a.Control,{type:"text",placeholder:"Enter Last Name:",onChange:function(e){h(e.target.value)}})]}),Object(u.jsxs)(q.a.Group,{className:"mb-3",controlId:"email",children:[Object(u.jsx)(q.a.Label,{children:"Email Address:"}),Object(u.jsx)(q.a.Control,{type:"email",placeholder:"Enter Email Address:",onChange:function(e){r(e.target.value)}})]}),Object(u.jsxs)(q.a.Group,{className:"mb-3",controlId:"password",children:[Object(u.jsx)(q.a.Label,{children:"Password:"}),Object(u.jsx)(q.a.Control,{type:"password",placeholder:"Enter Password:",onChange:function(e){f(e.target.value)}})]}),Object(u.jsx)(O.a,{variant:"primary",onClick:function(){fetch("https://young-refuge-95269.herokuapp.com/register",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({fname:o,lname:b,email:n,password:x})}).then((function(e){return e.json()})).then((function(e){e.id&&(C("loggedin"),I(""),T(e))}))},children:"Register"})]})}),F=function(){var e=Object(c.useState)(""),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),o=s[0],j=s[1],l=Object(c.useContext)(A),d=Object(i.a)(l,2),b=(d[0],d[1]),h=Object(c.useContext)(z),p=Object(i.a)(h,2),m=(p[0],p[1]),x=Object(c.useContext)(G),f=Object(i.a)(x,2),g=(f[0],f[1]);return Object(u.jsxs)(q.a,{children:[Object(u.jsxs)(q.a.Group,{className:"mb-3",controlId:"email",children:[Object(u.jsx)(q.a.Label,{children:"Email Address:"}),Object(u.jsx)(q.a.Control,{type:"email",placeholder:"Enter Email Address:",onChange:function(e){r(e.target.value)}})]}),Object(u.jsxs)(q.a.Group,{className:"mb-3",controlId:"password",children:[Object(u.jsx)(q.a.Label,{children:"Password:"}),Object(u.jsx)(q.a.Control,{type:"password",placeholder:"Enter Password:",onChange:function(e){j(e.target.value)}})]}),Object(u.jsx)(O.a,{variant:"primary",onClick:function(){fetch("https://young-refuge-95269.herokuapp.com/login",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:o})}).then((function(e){return e.json()})).then((function(e){e.id&&(b("loggedin"),m(""),g(e))}))},children:"Sign In"})]})},B=function(e){e.custId;return Object(c.useEffect)((function(){var e=localStorage.getItem("user"),t=JSON.parse(e).id,n={};fetch("https://young-refuge-95269.herokuapp.com/cartitem",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerId:t})}).then((function(e){return e.json()})).then((function(e){Object.assign(n,e),Object.keys(n).map((function(e){return fetch("https://young-refuge-95269.herokuapp.com/creatingOrder",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({custId:t,productName:n[e].product_name,qty:n[e].qty,price:n[e].price*n[e].qty,img:n[e].img})})}))}))}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("h1",{style:{textAlign:"center"},children:"Your Order Is successful"}),Object(u.jsx)(d.b,{to:"/",children:Object(u.jsx)("h2",{style:{textAlign:"center"},children:"Continue Shopping"})})]})},A=Object(c.createContext)(),z=Object(c.createContext)(),G=Object(c.createContext)(),R=Object(c.createContext)(),D=function(){var e=Object(c.useState)("loggedout"),t=Object(i.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)(""),s=Object(i.a)(a,2),o=s[0],j=s[1],l=Object(c.useState)({}),p=Object(i.a)(l,2),O=p[0],m=p[1],f=Object(c.useState)([]),g=Object(i.a)(f,2),y=g[0],C=g[1],v=Object(c.useState)(0),S=Object(i.a)(v,2),I=S[0],N=S[1];Object(c.useEffect)((function(){null!=localStorage.getItem("user")&&m(JSON.parse(localStorage.getItem("user"))),fetch("https://young-refuge-95269.herokuapp.com/products").then((function(e){return e.json()})).then((function(e){return C(e)})).catch((function(e){return console.log("Request Failed",e)}))}),[]),Object(c.useEffect)((function(){O.id&&(r("loggedin"),j(""),localStorage.setItem("user",JSON.stringify({id:O.id,email:O.email,name:O.name})),fetch("https://young-refuge-95269.herokuapp.com/getCartTotalItems",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({custId:O.id})}).then((function(e){return e.json()})).then((function(e){return N(e.cart_items)})))}),[O]);var k="";return"register"===o?k=Object(u.jsx)(L,{}):"signin"===o&&(k=Object(u.jsx)(F,{})),Object(u.jsx)(d.a,{children:Object(u.jsxs)(h.c,{children:[Object(u.jsxs)(h.a,{exact:!0,path:"/",children:[Object(u.jsx)(A.Provider,{value:[n,r],children:Object(u.jsxs)(z.Provider,{value:[o,j],children:[Object(u.jsx)(R.Provider,{value:[I,N],children:Object(u.jsx)(G.Provider,{value:[O,m],children:Object(u.jsx)(b,{})})}),Object(u.jsx)(G.Provider,{value:[O,m],children:k})]})}),Object(u.jsx)(G.Provider,{value:[O,m],children:Object(u.jsx)(R.Provider,{value:[I,N],children:Object(u.jsx)(x,{products:y})})})]}),Object(u.jsx)(h.a,{path:"/cart",children:Object(u.jsx)(R.Provider,{value:[I,N],children:Object(u.jsx)(w,{customerId:O.id})})}),Object(u.jsx)(h.a,{path:"/profile",children:Object(u.jsx)(_,{Name:O.name,Email:O.email})}),Object(u.jsx)(h.a,{path:"/orderdone",children:Object(u.jsx)(B,{})})]})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,107)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),c(e),r(e),a(e),s(e)}))};n(75),n(97);s.a.render(Object(u.jsx)(r.a.StrictMode,{children:Object(u.jsx)(D,{})}),document.getElementById("root")),Q()}},[[98,1,2]]]);
//# sourceMappingURL=main.30b23596.chunk.js.map